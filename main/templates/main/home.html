{% extends 'main/base.html' %}
{% load static %}


{% block title %}Главная{% endblock %}
{% block extra_styles %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<link rel="stylesheet" href="{% static 'css/supplier.css' %}">
<link rel="stylesheet" href="{% static 'css/catalog.css' %}">
{% endblock %}

{% block content %}
<div class="menu-section">
    <!-- Меню категорий -->
    <div class="menu-container">
        <ul class="category-list">
            {% for category in categories %}
            <li>
                <div class="category-box">
                    {% if category.id == 3 %} {# id "особой" категории #}
                    <a href="{% url 'main:subcategories_by_category' category.id %}">
                        <span>{{ category.name }}</span>
                    </a>
                    {% else %}
                    <span>{{ category.name }}</span>
                    {% endif %}
                </div>
                {% if category.subcategories.all and category.id != 3 %}
                <ul class="submenu">
                    {% for sub in category.subcategories.all %}
                    <li>
                        <a href="{% url 'main:products_by_subcategory' sub.id %}">{{ sub.name }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

<section class="advantages-section">
    <div class="advantages-container">
        <div class="adv-item">
            <div class="adv-number">1</div>
            <h3>Надёжный поставщик</h3>
            <p>Стабильность и соблюдение сроков.</p>
        </div>

        <div class="adv-item">
            <div class="adv-number">2</div>
            <h3>Цены завода изготовителя</h3>
            <p>Отсутствие наценок, прямая выгода.</p>
        </div>

        <div class="adv-item">
            <div class="adv-number">3</div>
            <h3>Широкий ассортимент</h3>
            <p>Всё необходимое в одном месте.</p>
        </div>

        <div class="adv-item">
            <div class="adv-number">4</div>
            <h3>Качество и гарантия</h3>
            <p>Продукция с официальной гарантией.</p>
        </div>
    </div>
</section>

{% include 'includes/inc_supplier.html' %}

{% include 'includes/inc_catalog.html' %}

{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener("DOMContentLoaded", function() {
    const slides = document.querySelectorAll('.slide');
    if (!slides.length) return;

    let index = 0;

    function setActive(i) {
        slides.forEach(s => s.classList.remove('active'));
        slides[i].classList.add('active');
    }

    const nextBtn = document.querySelector('.next');
    const prevBtn = document.querySelector('.prev');

    if (nextBtn) {
        nextBtn.onclick = () => {
            index = (index + 1) % slides.length;
            setActive(index);
        };
    }

    if (prevBtn) {
        prevBtn.onclick = () => {
            index = (index - 1 + slides.length) % slides.length;
            setActive(index);
        };
    }

    slides.forEach((slide, i) => {
        slide.onclick = () => {
            index = i;
            setActive(i);
        };
    });
});
</script>
{% endblock %}